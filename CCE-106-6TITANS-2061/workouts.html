<!DOCTYPE html>
<html lang="en">
<head>
     <style>
      #authButtons { visibility: hidden; }
    </style>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Workout & Diet Plans - 6Titans</title>
    <link rel="stylesheet" href="assets/css/styles-base.css">
    <link rel="stylesheet" href="assets/css/workouts.css">
    <link rel="stylesheet" href="assets/css/auth-nav.css">
    <link rel="stylesheet" href="assets/css/profile.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <img src="images/image 66.png" alt="6Titans Logo" class="logo-icon">
                <img src="images/image 67.png" alt="6Titans" class="logo-text">
            </div>
            <ul class="nav-menu">
                <li class="nav-item">
                    <a href="index.html" class="nav-link">Home</a>
                </li>
                <li class="nav-item">
                    <a href="membership.html" class="nav-link">Membership</a>
                </li>
                <li class="nav-item">
                    <a href="classes.html" class="nav-link">Classes</a>
                </li>
                <li class="nav-item">
                    <a href="workouts.html" class="nav-link active">Workouts</a>
                </li>
                <li class="nav-item">
                    <a href="coaching.html" class="nav-link">Coaching</a>
                </li>
                <li class="nav-item">
                    <a href="online-gym.html" class="nav-link">Appointments</a>
                </li>
                <li class="nav-item">
                    <a href="articles.html" class="nav-link">Articles</a>
                </li>
            </ul>
            <div class="auth-buttons" id="authButtons">
                <a href="login.html" id="loginBtnNav">Login</a>
                <a href="register.html" id="signupBtnNav">Sign Up</a>
            </div>
            <div class="hamburger">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>
        </div>
    </nav>

    <!-- Workout Plans Section -->
    <section class="workout-plans">
        <div class="container">
            <h1 class="page-title">Workout</h1>

            <!-- Workout Plans Content -->
            <div id="workoutPlans" class="tab-content active">
                <div class="plans-grid">
                    <!-- Beginner Strength -->
                    <div class="plan-card">
                        <div class="plan-icon">üèãÔ∏è‚Äç‚ôÇÔ∏è</div>
                        <h3 class="plan-name"> Strength</h3>
                        <p class="plan-description">Perfect for those new to strength training</p>
                        <div class="plan-details">
                            <div class="plan-detail">
                                <i class="fas fa-calendar"></i>
                                <span>9 weeks</span>
                            </div>
                            <div class="plan-detail">
                                <i class="fas fa-clock"></i>
                                <span>60min</span>
                            </div>
                        </div>
                        <button class="btn btn-primary choose-plan">Choose Plan</button>
                    </div>

                    <!-- Fat Burn HIIT -->
                    <div class="plan-card">
                        <div class="plan-icon">üî•</div>
                        <h3 class="plan-name">Agility</h3>
                        <p class="plan-description">High Intensity Workout for maximum calorie burn</p>
                        <div class="plan-details">
                            <div class="plan-detail">
                                <i class="fas fa-calendar"></i>
                                <span>6 weeks</span>
                            </div>
                            <div class="plan-detail">
                                <i class="fas fa-clock"></i>
                                <span>30min</span>
                            </div>
                        </div>
                        <button class="btn btn-primary choose-plan">Choose Plan</button>
                    </div>

                    <!-- Cardio Blast -->
                    <div class="plan-card">
                        <div class="plan-icon">‚ù§Ô∏è</div>
                        <h3 class="plan-name">Cardio</h3>
                        <p class="plan-description">Improve Cardiovascular health and endurance</p>
                        <div class="plan-details">
                            <div class="plan-detail">
                                <i class="fas fa-calendar"></i>
                                <span>4 weeks</span>
                            </div>
                            <div class="plan-detail">
                                <i class="fas fa-clock"></i>
                                <span>45min</span>
                            </div>
                        </div>
                        <button class="btn btn-primary choose-plan">Choose Plan</button>
                    </div>

                    <!-- Advanced Strength -->
                    <div class="plan-card">
                        <div class="plan-icon">üí™</div>
                        <h3 class="plan-name">Flexibility</h3>
                        <p class="plan-description">For experienced lifters looking to break plateaus</p>
                        <div class="plan-details">
                            <div class="plan-detail">
                                <i class="fas fa-calendar"></i>
                                <span>12 weeks</span>
                            </div>
                            <div class="plan-detail">
                                <i class="fas fa-clock"></i>
                                <span>90min</span>
                            </div>
                        </div>
                        <button class="btn btn-primary choose-plan">Choose Plan</button>
                    </div>

                </div>
            </div>
        </div>
    </section>

    <!-- Plan Details Modal -->
    <div id="planModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2 id="modalTitle">Plan Details</h2>
            <div id="modalContent">
                <!-- Plan details will be populated here -->
            </div>
            <div class="modal-actions">
                <button class="btn btn-secondary" id="closeModal">Close</button>
                <button class="btn btn-primary" id="selectPlan">Select This Plan</button>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <div class="footer-logo">
                        <img src="images/image 66.png" alt="6Titans Logo" class="logo-icon">
                        <img src="images/image 67.png" alt="6Titans" class="logo-text">
                    </div>
                    <p>Transform your body, transform your life.</p>
                </div>

                <div class="footer-section">
                    <h4>Support</h4>
                    <ul>
                        <li><a href="#">Help Center</a></li>
                        <li><a href="#">Contact Us</a></li>
                        <li><a href="#">Privacy Policy</a></li>
                        <li><a href="#">Terms of Service</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Follow Us</h4>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-facebook"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-youtube"></i></a>
                    </div>
                </div>
        
            <div class="footer-bottom">
                <p>&copy; 2024 6Titans. All rights reserved.</p>
            </div>
        </div>
    </footer>

        <script src="script.js"></script>
        <script src="workouts.js"></script>

        <script type="module">
            import { initializeApp } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-app.js";
            import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-auth.js";
            import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-firestore.js";
            const firebaseConfig = {
                apiKey: "AIzaSyC2YE5Cn0gbiuQ5sq8lErotl01itq5-hYk",
                authDomain: "titans-8d454.firebaseapp.com",
                projectId: "titans-8d454",
                storageBucket: "titans-8d454.firebasestorage.app",
                messagingSenderId: "537648978979",
                appId: "1:537648978979:web:30eb90af77c7569b7be596",
                measurementId: "G-W1D2R0Q1L1"
            };
            const app = initializeApp(firebaseConfig);
            const auth = getAuth(app);
            const db = getFirestore(app);
            function showUserUI(userData) {
                const authButtons = document.getElementById('authButtons');
                if (authButtons) {
                    authButtons.style.visibility = 'visible';
                    authButtons.innerHTML = `
                        <div class="profile-dropdown" id="profileDropdown">
                            <button class="profile-btn" id="profileBtn">
                                <span class="profile-avatar">üë§</span>
                                <span id="navUserName">${userData && userData.firstName ? userData.firstName : 'User'}</span>
                                <i class="fa fa-caret-down"></i>
                            </button>
                            <div class="profile-menu" id="profileMenu">
                                <div class="profile-menu-header">
                                    <span id="profileMenuName">${userData && userData.firstName ? userData.firstName : 'User'} ${userData && userData.lastName ? userData.lastName : ''}</span><br>
                                    <small id="profileMenuEmail">${userData && userData.email ? userData.email : (userData && userData.uid ? userData.uid : '')}</small>
                                </div>
                                <ul class="profile-menu-list">
                                    <li><a href="user-dashboard.html">Dashboard</a></li>
                                    <li><a href="#" id="profileViewBtn">View Profile</a></li>
                                    <li><button id="logoutBtnNav">Logout</button></li>
                                </ul>
                            </div>
                        </div>
                    `;
                    // Dropdown logic
                    const dropdown = document.getElementById('profileDropdown');
                    const btn = document.getElementById('profileBtn');
                    if (btn && dropdown) {
                        btn.addEventListener('click', (e) => {
                            e.stopPropagation();
                            dropdown.classList.toggle('open');
                        });
                        document.addEventListener('click', (e) => {
                            if (!dropdown.contains(e.target)) dropdown.classList.remove('open');
                        });
                    }
                    // Logout logic
                    const logoutBtn = document.getElementById('logoutBtnNav');
                    if (logoutBtn) {
                        logoutBtn.addEventListener('click', async (e) => {
                            e.preventDefault();
                            try {
                                await signOut(auth);
                                window.location.href = 'workouts.html';
                            } catch (error) {
                                alert('Logout failed: ' + error.message);
                            }
                        });
                    }
                    // Profile modal logic
                    const profileViewBtn = document.getElementById('profileViewBtn');
                    if (profileViewBtn) {
                        profileViewBtn.addEventListener('click', (e) => {
                            e.preventDefault();
                            showProfileModal(userData);
                        });
                    }
                }
            }
            function showGuestUI() {
                const authButtons = document.getElementById('authButtons');
                if (authButtons) {
                    authButtons.innerHTML = `
                        <a href="login.html" id="loginBtnNav">Login</a>
                        <a href="register.html" id="signupBtnNav">Sign Up</a>
                    `;
                    authButtons.style.visibility = 'visible';
                }
            }
            function showProfileModal(userData) {
                // Remove existing modal if present
                const oldModal = document.getElementById('profileModal');
                if (oldModal) oldModal.remove();
                const modal = document.createElement('div');
                modal.id = 'profileModal';
                modal.style.position = 'fixed';
                modal.style.top = '0';
                modal.style.left = '0';
                modal.style.width = '100vw';
                modal.style.height = '100vh';
                modal.style.background = 'rgba(0,0,0,0.7)';
                modal.style.display = 'flex';
                modal.style.alignItems = 'center';
                modal.style.justifyContent = 'center';
                modal.style.zIndex = '3000';
                modal.innerHTML = `
                    <div style="background:#181818;padding:2.5rem 2rem 2rem 2rem;border-radius:18px;min-width:320px;max-width:95vw;box-shadow:0 8px 32px #0008;position:relative;">
                        <button id="closeProfileModal" style="position:absolute;top:1rem;right:1rem;background:none;border:none;font-size:1.5rem;color:#ffd700;cursor:pointer;">&times;</button>
                        <div style="display:flex;align-items:center;gap:1.2rem;margin-bottom:1.5rem;">
                            <span style="font-size:2.5rem;">üë§</span>
                            <div>
                                <div style="font-size:1.3rem;font-weight:700;color:#ffd700;">${userData && userData.firstName ? userData.firstName : ''} ${userData && userData.lastName ? userData.lastName : ''}</div>
                                <div style="font-size:1rem;color:#fff;">${userData && userData.email ? userData.email : ''}</div>
                            </div>
                        </div>
                        <div style="margin-bottom:1.2rem;">
                            <strong>Account Type:</strong> <span style="color:#ffd700;">${userData && userData.accountType ? userData.accountType : 'Member'}</span>
                        </div>
                        <div style="margin-bottom:1.2rem;">
                            <strong>UID:</strong> <span style="color:#fff;">${userData && userData.uid ? userData.uid : ''}</span>
                        </div>
                        <div style="margin-bottom:1.2rem;">
                            <strong>Joined:</strong> <span style="color:#fff;">${userData && userData.createdAt ? new Date(userData.createdAt.seconds*1000).toLocaleDateString() : 'N/A'}</span>
                        </div>
                        <button style="margin-top:1.5rem;padding:0.7rem 1.5rem;background:#ffd700;color:#111;font-weight:700;border:none;border-radius:8px;cursor:pointer;">Edit Profile (Coming Soon)</button>
                    </div>
                `;
                document.body.appendChild(modal);
                document.getElementById('closeProfileModal').onclick = () => modal.remove();
                modal.onclick = (e) => { if (e.target === modal) modal.remove(); };
            }
            onAuthStateChanged(auth, async (user) => {
                if (user) {
                    // Fetch user info from Firestore
                    const userDoc = await getDoc(doc(db, "users", user.uid));
                    const userData = userDoc.exists() ? userDoc.data() : null;
                    showUserUI(userData);
                } else {
                    showGuestUI();
                }
            });
        </script>
</body>
</html>
